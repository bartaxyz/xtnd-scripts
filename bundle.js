!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(1),n(2),n(3),n(4),n(5),n(6),n(7)},function(t,e){var n;n=function(){function t(t){var e=this;this.timer=0,this.timerRefreshRate=60,this.timerDuration=5e3,this.section=t,this.carouselContent=this.section.getElementsByClassName("carousel-content")[0],this.controlsIndex=this.section.getElementsByClassName("carousel-controls-index")[0],this.controlsHandles=this.section.getElementsByClassName("carousel-controls-handle"),this.controlsHandleTimers=this.section.getElementsByClassName("carousel-controls-handle-timer"),this.carouselContent.addEventListener("click",(function(){e.increaseIndex()})),this.initElementStates(),this.initEventListeners(),this.setIndex(0),this.timerTick()}return t.prototype.timerTick=function(){var t=this;this.timer+=1e3/this.timerRefreshRate,this.timer>this.timerDuration&&(this.timer=0,this.increaseIndex()),this.updateActiveControlHandle(),setTimeout((function(){t.timerTick()}),1e3/this.timerRefreshRate)},t.prototype.initElementStates=function(){[].forEach.call(this.controlsHandleTimers,(function(t){return t.style.width="0%"}))},t.prototype.initEventListeners=function(){var t=this;[].forEach.call(this.controlsHandles,(function(e,n){e.addEventListener("click",(function(){t.setIndex(n)}))}))},t.prototype.increaseIndex=function(){void 0!==this.currentIndex&&(this.currentIndex===this.controlsHandleTimers.length-1?this.setIndex(0):this.setIndex(this.currentIndex+1))},t.prototype.setIndex=function(t){this.timer=0,this.updateControlsHandles(this.currentIndex,t),this.currentIndex=t,this.setControlsIndex(this.currentIndex),this.updateCarouselContent()},t.prototype.setControlsIndex=function(t){this.controlsIndex&&(this.controlsIndex.textContent="0"+(t+1))},t.prototype.updateActiveControlHandle=function(){void 0!==this.currentIndex&&(this.controlsHandleTimers[this.currentIndex].style.width=100/this.timerDuration*this.timer+"%")},t.prototype.updateControlsHandles=function(t,e){void 0!==t&&(this.controlsHandleTimers[t].style.width="0%"),void 0!==e&&(this.controlsHandleTimers[e].style.width="100%")},t.prototype.updateCarouselContent=function(){this.carouselContent&&(this.carouselContent.style.marginLeft="-"+this.currentIndex+"00%")},t}(),window.Carousel=n,addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("carousel-section");t&&new n(t);for(var e=document.querySelectorAll('[data-component="carousel"]'),o=0;o<e.length;++o)new n(e[o]);var i=document.querySelectorAll("[data-icon=arrow-right-white]");[].forEach.call(i,(function(t){t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="16" viewBox="0 0 20 16"><path fill="currentColor" fill-rule="nonzero" d="M1.083 9.51l12.86-.006-4.052 4.061a1.054 1.054 0 0 0-.308.749c0 .282.11.549.308.747l.63.631c.198.198.463.308.744.308.282 0 .547-.109.745-.307l6.946-6.946c.2-.199.308-.464.307-.746.001-.284-.108-.549-.307-.748L12.01.307A1.046 1.046 0 0 0 11.265 0c-.281 0-.546.11-.744.307l-.63.631a1.043 1.043 0 0 0-.308.744c0 .282.11.532.308.73l4.098 4.084H1.069c-.581 0-1.069.5-1.069 1.08v.893c0 .58.502 1.042 1.083 1.042z" /></svg>'}))}))},function(t,e){var n;n=function(){function t(t){this.cartButton=t,this.initCartButtonWatcher()}return t.prototype.initCartButtonWatcher=function(){var t=this,e=0;setInterval((function(){if(t.cartButton.textContent){var n=parseInt(t.cartButton.textContent,10);e!==n&&(0===(e=n)?t.cartButton.classList.add("empty"):t.cartButton.classList.remove("empty"))}}),100)},t}(),addEventListener("DOMContentLoaded",(function(){for(var t=document.querySelectorAll('[data-component="cart-button"]'),e=0;e<t.length;++e)new n(t[e])}))},function(t,e){var n,o,i,r,s=function(){r.style.display="flex",i.style.display="none",o.style.opacity="1",o.style.pointerEvents="",n&&n.playVideo(),document.body.style.height="100%",document.body.style.overflow="hidden"},c=function(){i.style.display="flex",r.style.display="none",o.style.opacity="0",o.style.pointerEvents="none",n&&n.stopVideo(),document.body.style.height="",document.body.style.overflow=""};addEventListener("DOMContentLoaded",(function(){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}));var a=function(){n=new(void 0).Player("intro-video",{height:"100%",width:"100%",videoId:"C-VqyDHpsf0",playerVars:{controls:0},events:{onReady:l,onStateChange:u}}),o=document.querySelector("#intro-video"),i=document.querySelector("[data-component=introPlayButton]"),r=document.querySelector("[data-component=introPauseButton]"),o&&i&&r&&(i.addEventListener("click",s),r.addEventListener("click",c),o.style.display="block",c())},l=function(t){},u=function(t){t.data==(void 0).PlayerState.PLAYING&&console.log("playing")};window.onYouTubeIframeAPIReady=function(){console.log("onYouTubeIframeAPIReady"),a()}},function(t,e){addEventListener("resize",(function(){if(innerWidth>767)return!1}))},function(t,e){var n;n=function(){function t(t){this.navigation=t,this.initOnScroll()}return t.prototype.initOnScroll=function(){var t=this;window.addEventListener("scroll",(function(){0===scrollY?t.navigation.classList.add("transparent"):t.navigation.classList.remove("transparent")}))},t}(),addEventListener("DOMContentLoaded",(function(){for(var t=document.querySelectorAll('[data-component="navigation"]'),e=0;e<t.length;++e)new n(t[e])}))},function(t,e){var n;n=function(t){this.scrollTopButton=t,this.scrollTopButton.addEventListener("click",(function(){scrollTo(0,0)}))},addEventListener("DOMContentLoaded",(function(){for(var t=document.querySelectorAll('[data-component="scroll-top"]'),e=0;e<t.length;++e)new n(t[e])}))},function(t,e){var n;n=function(){function t(t){this.timer=0,this.timerRefreshRate=60,this.timerDuration=5e3,this.section=t,this.carouselContent=this.section.getElementsByClassName("showcase-carousel-content")[0],this.carouselSlides=this.carouselContent.getElementsByClassName("showcase-carousel-content-slide"),this.controlsHandles=this.section.getElementsByClassName("showcase-carousel-controls-handle"),this.controlsHandleTimers=this.section.getElementsByClassName("showcase-carousel-controls-handle-timer"),this.initElementStates(),this.initEventListeners(),this.setIndex(0),this.timerTick()}return t.prototype.timerTick=function(){return!1},t.prototype.initElementStates=function(){[].forEach.call(this.controlsHandleTimers,(function(t){return t.style.flexGrow="0"})),[].forEach.call(this.carouselSlides,(function(t,e){t.style.opacity=0===e?"1":"0"}))},t.prototype.initEventListeners=function(){var t=this;[].forEach.call(this.controlsHandles,(function(e,n){e.addEventListener("click",(function(){t.setIndex(n)}))}))},t.prototype.increaseIndex=function(){void 0!==this.currentIndex&&(this.currentIndex===this.controlsHandleTimers.length-1?this.setIndex(0):this.setIndex(this.currentIndex+1))},t.prototype.setIndex=function(t){this.timer=0,this.currentIndex=t,this.updateControlsHandles(),this.updateCarouselContent()},t.prototype.updateActiveControlHandle=function(){void 0!==this.currentIndex&&(this.controlsHandleTimers[this.currentIndex].style.flexGrow=""+1/this.timerDuration*this.timer)},t.prototype.updateControlsHandles=function(){var t=this;[].forEach.call(this.controlsHandles,(function(e,n){n===t.currentIndex?(e.style.opacity="1",e.style.height="64px"):(e.style.opacity="0.4",e.style.height="48px")}))},t.prototype.updateCarouselContent=function(){var t=this;[].forEach.call(this.carouselSlides,(function(e,n){n===t.currentIndex?e.style.opacity="1":e.style.opacity="0"}))},t}(),window.ShowcaseCarousel=n,addEventListener("DOMContentLoaded",(function(){for(var t=document.querySelectorAll('[data-component="showcase-carousel"]'),e=0;e<t.length;++e)new n(t[e])}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9jYXJvdXNlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY2FydEJ1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW50cm9WaWRlby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9nb0FuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmF2aWdhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2Nyb2xsVG9wLnRzIiwid2VicGFjazovLy8uL3NyYy9zaG93Y2FzZUNhcm91c2VsLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic2VjdGlvbiIsInRpbWVyIiwidGltZXJSZWZyZXNoUmF0ZSIsInRpbWVyRHVyYXRpb24iLCJ0aGlzIiwiY2Fyb3VzZWxDb250ZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNvbnRyb2xzSW5kZXgiLCJjb250cm9sc0hhbmRsZXMiLCJjb250cm9sc0hhbmRsZVRpbWVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbmNyZWFzZUluZGV4IiwiaW5pdEVsZW1lbnRTdGF0ZXMiLCJpbml0RXZlbnRMaXN0ZW5lcnMiLCJzZXRJbmRleCIsInRpbWVyVGljayIsInVwZGF0ZUFjdGl2ZUNvbnRyb2xIYW5kbGUiLCJzZXRUaW1lb3V0IiwiZm9yRWFjaCIsImhhbmRsZVRpbWVyIiwic3R5bGUiLCJ3aWR0aCIsImhhbmRsZSIsImluZGV4IiwiY3VycmVudEluZGV4IiwibGVuZ3RoIiwidXBkYXRlQ29udHJvbHNIYW5kbGVzIiwic2V0Q29udHJvbHNJbmRleCIsInVwZGF0ZUNhcm91c2VsQ29udGVudCIsInRleHRDb250ZW50IiwicHJldkluZGV4IiwibmV4dEluZGV4IiwibWFyZ2luTGVmdCIsIndpbmRvdyIsIkNhcm91c2VsIiwiY2Fyb3VzZWxTZWN0aW9uIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNhcm91c2VscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhcnJvd1JpZ2h0V2hpdGVFbGVtZW50cyIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJjYXJ0QnV0dG9uIiwiaW5pdENhcnRCdXR0b25XYXRjaGVyIiwibnVtYmVyIiwic2V0SW50ZXJ2YWwiLCJjdXJyZW50TnVtYmVyIiwicGFyc2VJbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJDYXJ0QnV0dG9uIiwicGxheWVyIiwidmlkZW8iLCJwbGF5QnV0dG9uIiwicGF1c2VCdXR0b24iLCJwbGF5VmlkZW8iLCJkaXNwbGF5Iiwib3BhY2l0eSIsInBvaW50ZXJFdmVudHMiLCJib2R5IiwiaGVpZ2h0Iiwib3ZlcmZsb3ciLCJwYXVzZVZpZGVvIiwic3RvcFZpZGVvIiwidGFnIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsImZpcnN0U2NyaXB0VGFnIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiaW5pdEludHJvVmlkZW9QbGF5ZXIiLCJZVCIsIlBsYXllciIsInZpZGVvSWQiLCJwbGF5ZXJWYXJzIiwiY29udHJvbHMiLCJldmVudHMiLCJvblJlYWR5Iiwib25QbGF5ZXJSZWFkeSIsIm9uU3RhdGVDaGFuZ2UiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwicXVlcnlTZWxlY3RvciIsImV2ZW50IiwiZGF0YSIsIlBsYXllclN0YXRlIiwiUExBWUlORyIsImNvbnNvbGUiLCJsb2ciLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsImlubmVyV2lkdGgiLCJuYXZpZ2F0aW9uIiwiaW5pdE9uU2Nyb2xsIiwic2Nyb2xsWSIsIk5hdmlnYXRpb24iLCJzY3JvbGxUb3BCdXR0b24iLCJzY3JvbGxUbyIsIlNjcm9sbFRvcCIsImNhcm91c2VsU2xpZGVzIiwiZmxleEdyb3ciLCJzbGlkZSIsIlNob3djYXNlQ2Fyb3VzZWwiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0Ys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S0ksaUJBQ0wsU0FBQ2MsRUFBcUJDLEdBRWhCQSxJQUFVLEVBQUtDLGNBQ2pCRixFQUFPRixNQUFNdUMsUUFBVSxJQUN2QnJDLEVBQU9GLE1BQU0wQyxPQUFTLFNBRXRCeEMsRUFBT0YsTUFBTXVDLFFBQVUsTUFDdkJyQyxFQUFPRixNQUFNMEMsT0FBUyxZQU05QixZQUFBbEMsc0JBQUEsc0JBQ0UsR0FBR1YsUUFBUS9DLEtBQ1RpQyxLQUFLZ0csZ0JBQ0wsU0FBQ0UsRUFBb0IvRSxHQUVmQSxJQUFVLEVBQUtDLGFBQ2pCOEUsRUFBTWxGLE1BQU11QyxRQUFVLElBRXRCMkMsRUFBTWxGLE1BQU11QyxRQUFVLFFBS2hDLEVBN0lBLEdBK0lDMUIsT0FBZXNFLGlCQUFtQkEsRUFFbkM3RixpQkFBaUIsb0JBQW9CLFdBS25DLElBSkEsSUFBTTRCLEVBQVlGLFNBQVNHLGlCQUN6Qix3Q0FHT3ZFLEVBQUksRUFBR0EsRUFBSXNFLEVBQVViLFNBQVV6RCxFQUN0QyxJQUFJdUksRUFBaUJqRSxFQUFVdEUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9jYXJvdXNlbFwiO1xuaW1wb3J0IFwiLi9jYXJ0QnV0dG9uXCI7XG5pbXBvcnQgXCIuL2ludHJvVmlkZW9cIjtcbmltcG9ydCBcIi4vbG9nb0FuaW1hdGlvblwiO1xuaW1wb3J0IFwiLi9uYXZpZ2F0aW9uXCI7XG5pbXBvcnQgXCIuL3Njcm9sbFRvcFwiO1xuaW1wb3J0IFwiLi9zaG93Y2FzZUNhcm91c2VsXCI7XG4iLCIoKCkgPT4ge1xuICBjbGFzcyBDYXJvdXNlbCB7XG4gICAgY3VycmVudEluZGV4PzogbnVtYmVyO1xuXG4gICAgc2VjdGlvbjogSFRNTEVsZW1lbnQ7XG4gICAgY2Fyb3VzZWxDb250ZW50OiBIVE1MRWxlbWVudDtcbiAgICBjb250cm9sc0luZGV4OiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG4gICAgY29udHJvbHNIYW5kbGVzOiBIVE1MQ29sbGVjdGlvbjtcbiAgICBjb250cm9sc0hhbmRsZVRpbWVyczogSFRNTENvbGxlY3Rpb247XG5cbiAgICB0aW1lcjogbnVtYmVyID0gMDtcbiAgICB0aW1lclJlZnJlc2hSYXRlID0gNjA7XG4gICAgdGltZXJEdXJhdGlvbiA9IDUgKiAxMDAwO1xuXG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbjogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc2VjdGlvbiA9IHNlY3Rpb247XG4gICAgICB0aGlzLmNhcm91c2VsQ29udGVudCA9IHRoaXMuc2VjdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcImNhcm91c2VsLWNvbnRlbnRcIlxuICAgICAgKVswXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgIHRoaXMuY29udHJvbHNJbmRleCA9IHRoaXMuc2VjdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcImNhcm91c2VsLWNvbnRyb2xzLWluZGV4XCJcbiAgICAgIClbMF0gYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICB0aGlzLmNvbnRyb2xzSGFuZGxlcyA9IHRoaXMuc2VjdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcImNhcm91c2VsLWNvbnRyb2xzLWhhbmRsZVwiXG4gICAgICApO1xuICAgICAgdGhpcy5jb250cm9sc0hhbmRsZVRpbWVycyA9IHRoaXMuc2VjdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcImNhcm91c2VsLWNvbnRyb2xzLWhhbmRsZS10aW1lclwiXG4gICAgICApO1xuXG4gICAgICB0aGlzLmNhcm91c2VsQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+wqB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VJbmRleCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuaW5pdEVsZW1lbnRTdGF0ZXMoKTtcbiAgICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLnNldEluZGV4KDApO1xuXG4gICAgICB0aGlzLnRpbWVyVGljaygpO1xuICAgIH1cblxuICAgIHRpbWVyVGljaygpIHtcbiAgICAgIHRoaXMudGltZXIgKz0gMTAwMCAvIHRoaXMudGltZXJSZWZyZXNoUmF0ZTtcblxuICAgICAgaWYgKHRoaXMudGltZXIgPiB0aGlzLnRpbWVyRHVyYXRpb24pIHtcbiAgICAgICAgdGhpcy50aW1lciA9IDA7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VJbmRleCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVwZGF0ZUFjdGl2ZUNvbnRyb2xIYW5kbGUoKTtcblxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudGltZXJUaWNrKCk7XG4gICAgICB9LCAxMDAwIC8gdGhpcy50aW1lclJlZnJlc2hSYXRlKTtcbiAgICB9XG5cbiAgICBpbml0RWxlbWVudFN0YXRlcygpIHtcbiAgICAgIFtdLmZvckVhY2guY2FsbChcbiAgICAgICAgdGhpcy5jb250cm9sc0hhbmRsZVRpbWVycyxcbiAgICAgICAgKGhhbmRsZVRpbWVyOiBIVE1MRWxlbWVudCkgPT4gKGhhbmRsZVRpbWVyLnN0eWxlLndpZHRoID0gXCIwJVwiKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpbml0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICBbXS5mb3JFYWNoLmNhbGwoXG4gICAgICAgIHRoaXMuY29udHJvbHNIYW5kbGVzLFxuICAgICAgICAoaGFuZGxlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRJbmRleChpbmRleCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaW5jcmVhc2VJbmRleCgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5jdXJyZW50SW5kZXggPT09IFwidW5kZWZpbmVkXCIpIHJldHVybjtcblxuICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLmNvbnRyb2xzSGFuZGxlVGltZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdGhpcy5zZXRJbmRleCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0SW5kZXgodGhpcy5jdXJyZW50SW5kZXggKyAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgICB0aGlzLnRpbWVyID0gMDtcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbHNIYW5kbGVzKHRoaXMuY3VycmVudEluZGV4LCBpbmRleCk7XG4gICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgdGhpcy5zZXRDb250cm9sc0luZGV4KHRoaXMuY3VycmVudEluZGV4KTtcbiAgICAgIHRoaXMudXBkYXRlQ2Fyb3VzZWxDb250ZW50KCk7XG4gICAgfVxuXG4gICAgc2V0Q29udHJvbHNJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgICBpZiAoIXRoaXMuY29udHJvbHNJbmRleCkgcmV0dXJuO1xuICAgICAgdGhpcy5jb250cm9sc0luZGV4LnRleHRDb250ZW50ID0gYDAke2luZGV4ICsgMX1gO1xuICAgIH1cblxuICAgIHVwZGF0ZUFjdGl2ZUNvbnRyb2xIYW5kbGUoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudEluZGV4ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICh0aGlzLmNvbnRyb2xzSGFuZGxlVGltZXJzW1xuICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4XG4gICAgICAgIF0gYXMgSFRNTERpdkVsZW1lbnQpLnN0eWxlLndpZHRoID0gYCR7XG4gICAgICAgICAgKDEwMCAvIHRoaXMudGltZXJEdXJhdGlvbikgKiB0aGlzLnRpbWVyXG4gICAgICAgIH0lYDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVDb250cm9sc0hhbmRsZXMocHJldkluZGV4PzogbnVtYmVyLCBuZXh0SW5kZXg/OiBudW1iZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJldkluZGV4ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICh0aGlzLmNvbnRyb2xzSGFuZGxlVGltZXJzW3ByZXZJbmRleF0gYXMgSFRNTERpdkVsZW1lbnQpLnN0eWxlLndpZHRoID1cbiAgICAgICAgICBcIjAlXCI7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG5leHRJbmRleCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAodGhpcy5jb250cm9sc0hhbmRsZVRpbWVyc1tuZXh0SW5kZXhdIGFzIEhUTUxEaXZFbGVtZW50KS5zdHlsZS53aWR0aCA9XG4gICAgICAgICAgXCIxMDAlXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlQ2Fyb3VzZWxDb250ZW50KCkge1xuICAgICAgaWYgKCF0aGlzLmNhcm91c2VsQ29udGVudCkgcmV0dXJuO1xuICAgICAgdGhpcy5jYXJvdXNlbENvbnRlbnQuc3R5bGUubWFyZ2luTGVmdCA9IGAtJHt0aGlzLmN1cnJlbnRJbmRleH0wMCVgO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGJhY2tncm91bmRJbWFnZVBvc2l0aW9uID0ge1xuICAgIGRlc2t0b3A6IFt7IGJhY2tncm91bmRQb3NpdGlvblg6IDE3LCBiYWNrZ3JvdW5kU2l6ZTogXCJhdXRvIDI1MCVcIiB9XSxcbiAgICBwaG9uZToge30sXG4gIH07XG5cbiAgKHdpbmRvdyBhcyBhbnkpLkNhcm91c2VsID0gQ2Fyb3VzZWw7XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcm91c2VsU2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgXCJjYXJvdXNlbC1zZWN0aW9uXCJcbiAgICApIGFzIEhUTUxEaXZFbGVtZW50O1xuXG4gICAgaWYgKGNhcm91c2VsU2VjdGlvbikge1xuICAgICAgbmV3IENhcm91c2VsKGNhcm91c2VsU2VjdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY29tcG9uZW50PVwiY2Fyb3VzZWxcIl0nKTtcblxuICAgIGZvciggbGV0IGkgPSAwOyBpIDwgY2Fyb3VzZWxzLmxlbmd0aDsgKytpKSB7XG4gICAgICBuZXcgQ2Fyb3VzZWwoY2Fyb3VzZWxzW2ldIGFzIEhUTUxEaXZFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBJbmplY3QgU1ZHIEljb25zXG4gICAgY29uc3QgYXJyb3dSaWdodFdoaXRlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCJbZGF0YS1pY29uPWFycm93LXJpZ2h0LXdoaXRlXVwiXG4gICAgKTtcbiAgICBbXS5mb3JFYWNoLmNhbGwoYXJyb3dSaWdodFdoaXRlRWxlbWVudHMsIChlbGVtZW50OiBIVE1MRGl2RWxlbWVudCkgPT4ge1xuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPVxuICAgICAgICAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjE2XCIgdmlld0JveD1cIjAgMCAyMCAxNlwiPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIgZD1cIk0xLjA4MyA5LjUxbDEyLjg2LS4wMDYtNC4wNTIgNC4wNjFhMS4wNTQgMS4wNTQgMCAwIDAtLjMwOC43NDljMCAuMjgyLjExLjU0OS4zMDguNzQ3bC42My42MzFjLjE5OC4xOTguNDYzLjMwOC43NDQuMzA4LjI4MiAwIC41NDctLjEwOS43NDUtLjMwN2w2Ljk0Ni02Ljk0NmMuMi0uMTk5LjMwOC0uNDY0LjMwNy0uNzQ2LjAwMS0uMjg0LS4xMDgtLjU0OS0uMzA3LS43NDhMMTIuMDEuMzA3QTEuMDQ2IDEuMDQ2IDAgMCAwIDExLjI2NSAwYy0uMjgxIDAtLjU0Ni4xMS0uNzQ0LjMwN2wtLjYzLjYzMWExLjA0MyAxLjA0MyAwIDAgMC0uMzA4Ljc0NGMwIC4yODIuMTEuNTMyLjMwOC43M2w0LjA5OCA0LjA4NEgxLjA2OWMtLjU4MSAwLTEuMDY5LjUtMS4wNjkgMS4wOHYuODkzYzAgLjU4LjUwMiAxLjA0MiAxLjA4MyAxLjA0MnpcIiAvPjwvc3ZnPic7XG4gICAgfSk7XG4gIH0pO1xufSkoKTtcbiIsIigoKSA9PiB7XG4gIGNsYXNzIENhcnRCdXR0b24ge1xuICAgIGNhcnRJdGVtcz86IG51bWJlcjtcblxuICAgIGNhcnRCdXR0b246IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoY2FydEJ1dHRvbjogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgIHRoaXMuY2FydEJ1dHRvbiA9IGNhcnRCdXR0b247XG5cbiAgICAgIHRoaXMuaW5pdENhcnRCdXR0b25XYXRjaGVyKCk7XG4gICAgfVxuXG4gICAgaW5pdENhcnRCdXR0b25XYXRjaGVyKCkge1xuICAgICAgbGV0IG51bWJlciA9IDA7XG4gICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5jYXJ0QnV0dG9uLnRleHRDb250ZW50KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY3VycmVudE51bWJlciA9IHBhcnNlSW50KHRoaXMuY2FydEJ1dHRvbi50ZXh0Q29udGVudCwgMTApO1xuXG4gICAgICAgIGlmIChudW1iZXIgPT09IGN1cnJlbnROdW1iZXIpIHJldHVybjtcblxuICAgICAgICBudW1iZXIgPSBjdXJyZW50TnVtYmVyO1xuXG4gICAgICAgIGlmIChudW1iZXIgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmNhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImVtcHR5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2FydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZW1wdHlcIik7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMCk7XG4gICAgfVxuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnW2RhdGEtY29tcG9uZW50PVwiY2FydC1idXR0b25cIl0nXG4gICAgKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2Fyb3VzZWxzLmxlbmd0aDsgKytpKSB7XG4gICAgICBuZXcgQ2FydEJ1dHRvbihjYXJvdXNlbHNbaV0gYXMgSFRNTERpdkVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuIiwibGV0IFlUOiBhbnk7XG5sZXQgcGxheWVyOiBhbnk7XG5sZXQgdmlkZW86IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcbmxldCBwbGF5QnV0dG9uOiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XG5sZXQgcGF1c2VCdXR0b246IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcblxuY29uc3QgaW5pdE1lZGlhID0gKCkgPT4ge1xuICB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW50cm8tdmlkZW9cIik7XG4gIHBsYXlCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtY29tcG9uZW50PWludHJvUGxheUJ1dHRvbl1cIik7XG4gIHBhdXNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWNvbXBvbmVudD1pbnRyb1BhdXNlQnV0dG9uXVwiKTtcblxuICBpZiAoIXZpZGVvIHx8ICFwbGF5QnV0dG9uIHx8ICFwYXVzZUJ1dHRvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHBsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHBsYXlWaWRlbyk7XG4gIHBhdXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwYXVzZVZpZGVvKTtcblxuICB2aWRlby5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gIHBhdXNlVmlkZW8oKTtcbn07XG5cbmNvbnN0IGRpc2FibGVTY3JvbGxpbmcgPSAoKSA9PiB7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xufTtcbmNvbnN0IGVuYWJsZVNjcm9sbGluZyA9ICgpID0+IHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIlwiO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gXCJcIjtcbn07XG5cbmNvbnN0IHBsYXlWaWRlbyA9ICgpID0+IHtcbiAgcGF1c2VCdXR0b24hLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgcGxheUJ1dHRvbiEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB2aWRlbyEuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICB2aWRlbyEuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiXCI7XG4gIGlmIChwbGF5ZXIpIHtcbiAgICBwbGF5ZXIucGxheVZpZGVvKCk7XG4gIH1cbiAgZGlzYWJsZVNjcm9sbGluZygpO1xufTtcbmNvbnN0IHBhdXNlVmlkZW8gPSAoKSA9PiB7XG4gIHBsYXlCdXR0b24hLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgcGF1c2VCdXR0b24hLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgdmlkZW8hLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcbiAgdmlkZW8hLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgaWYgKHBsYXllcikge1xuICAgIHBsYXllci5zdG9wVmlkZW8oKTtcbiAgfVxuICBlbmFibGVTY3JvbGxpbmcoKTtcbn07XG5cbmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgLy8gSW5pdCBZb3V0dWJlIEFQSVxuICBjb25zdCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXG4gIHRhZy5zcmMgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGlcIjtcbiAgY29uc3QgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtcbiAgZmlyc3RTY3JpcHRUYWchLnBhcmVudE5vZGUhLmluc2VydEJlZm9yZSh0YWcsIGZpcnN0U2NyaXB0VGFnKTtcblxuICAvLyBJbml0IGN1c3RvbSBtZWRpYSBzY3JpcHRcbn0pO1xuXG5jb25zdCBpbml0SW50cm9WaWRlb1BsYXllciA9ICgpID0+IHtcbiAgcGxheWVyID0gbmV3IFlULlBsYXllcihcImludHJvLXZpZGVvXCIsIHtcbiAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICB2aWRlb0lkOiBcIkMtVnF5REhwc2YwXCIsXG4gICAgcGxheWVyVmFyczoge1xuICAgICAgY29udHJvbHM6IDBcbiAgICB9LFxuICAgIGV2ZW50czoge1xuICAgICAgb25SZWFkeTogb25QbGF5ZXJSZWFkeSxcbiAgICAgIG9uU3RhdGVDaGFuZ2U6IG9uUGxheWVyU3RhdGVDaGFuZ2VcbiAgICB9XG4gIH0pO1xuXG4gIGluaXRNZWRpYSgpO1xufTtcblxuY29uc3Qgb25QbGF5ZXJSZWFkeSA9IChldmVudDogYW55KSA9PiB7XG4gIC8vIGV2ZW50LnRhcmdldC5wbGF5VmlkZW8oKTtcbn07XG5cbmNvbnN0IG9uUGxheWVyU3RhdGVDaGFuZ2UgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICBpZiAoZXZlbnQuZGF0YSA9PSBZVC5QbGF5ZXJTdGF0ZS5QTEFZSU5HKSB7XG4gICAgY29uc29sZS5sb2coXCJwbGF5aW5nXCIpO1xuICB9XG59O1xuXG4od2luZG93IGFzIGFueSkub25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKFwib25Zb3VUdWJlSWZyYW1lQVBJUmVhZHlcIik7XG4gIGluaXRJbnRyb1ZpZGVvUGxheWVyKCk7XG59O1xuIiwiYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCAoKSA9PiB7XG4gIGlmIChpbm5lcldpZHRoID4gNzY3KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KTtcbiIsIigoKSA9PiB7XG4gIGNsYXNzIE5hdmlnYXRpb24ge1xuICAgIGNhcnRJdGVtcz86IG51bWJlcjtcblxuICAgIG5hdmlnYXRpb246IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IobmF2aWdhdGlvbjogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgIHRoaXMubmF2aWdhdGlvbiA9IG5hdmlnYXRpb247XG5cbiAgICAgIHRoaXMuaW5pdE9uU2Nyb2xsKCk7XG4gICAgfVxuXG4gICAgaW5pdE9uU2Nyb2xsKCkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+wqB7XG4gICAgICAgIGlmIChzY3JvbGxZID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmNsYXNzTGlzdC5hZGQoJ3RyYW5zcGFyZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3RyYW5zcGFyZW50Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnW2RhdGEtY29tcG9uZW50PVwibmF2aWdhdGlvblwiXSdcbiAgICApO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJvdXNlbHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIG5ldyBOYXZpZ2F0aW9uKGNhcm91c2Vsc1tpXSBhcyBIVE1MRGl2RWxlbWVudCk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG4iLCIoKCkgPT4ge1xuICBjbGFzcyBTY3JvbGxUb3Age1xuICAgIHNjcm9sbFRvcEJ1dHRvbjogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihzY3JvbGxUb3BCdXR0b246IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICB0aGlzLnNjcm9sbFRvcEJ1dHRvbiA9IHNjcm9sbFRvcEJ1dHRvbjtcblxuICAgICAgdGhpcy5zY3JvbGxUb3BCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgc2Nyb2xsVG8oMCwgMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgY29uc3QgY2Fyb3VzZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICdbZGF0YS1jb21wb25lbnQ9XCJzY3JvbGwtdG9wXCJdJ1xuICAgICk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcm91c2Vscy5sZW5ndGg7ICsraSkge1xuICAgICAgbmV3IFNjcm9sbFRvcChjYXJvdXNlbHNbaV0gYXMgSFRNTERpdkVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgY2xhc3MgU2hvd2Nhc2VDYXJvdXNlbCB7XG4gICAgY3VycmVudEluZGV4PzogbnVtYmVyO1xuXG4gICAgc2VjdGlvbjogSFRNTEVsZW1lbnQ7XG4gICAgY2Fyb3VzZWxDb250ZW50OiBIVE1MRWxlbWVudDtcbiAgICBjYXJvdXNlbFNsaWRlczogSFRNTENvbGxlY3Rpb247XG4gICAgY29udHJvbHNIYW5kbGVzOiBIVE1MQ29sbGVjdGlvbjtcbiAgICBjb250cm9sc0hhbmRsZVRpbWVyczogSFRNTENvbGxlY3Rpb247XG5cbiAgICB0aW1lcjogbnVtYmVyID0gMDtcbiAgICB0aW1lclJlZnJlc2hSYXRlID0gNjA7XG4gICAgdGltZXJEdXJhdGlvbiA9IDUgKiAxMDAwO1xuXG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbjogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgIHRoaXMuc2VjdGlvbiA9IHNlY3Rpb247XG4gICAgICB0aGlzLmNhcm91c2VsQ29udGVudCA9IHRoaXMuc2VjdGlvbi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcInNob3djYXNlLWNhcm91c2VsLWNvbnRlbnRcIlxuICAgICAgKVswXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgIHRoaXMuY2Fyb3VzZWxTbGlkZXMgPSB0aGlzLmNhcm91c2VsQ29udGVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICBcInNob3djYXNlLWNhcm91c2VsLWNvbnRlbnQtc2xpZGVcIlxuICAgICAgKTtcbiAgICAgIHRoaXMuY29udHJvbHNIYW5kbGVzID0gdGhpcy5zZWN0aW9uLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgICAgIFwic2hvd2Nhc2UtY2Fyb3VzZWwtY29udHJvbHMtaGFuZGxlXCJcbiAgICAgICk7XG4gICAgICB0aGlzLmNvbnRyb2xzSGFuZGxlVGltZXJzID0gdGhpcy5zZWN0aW9uLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXG4gICAgICAgIFwic2hvd2Nhc2UtY2Fyb3VzZWwtY29udHJvbHMtaGFuZGxlLXRpbWVyXCJcbiAgICAgICk7XG5cbiAgICAgIC8vIFRPRE86IENoZWNrIGlmIHRoaXMgd29ya3MgbmljZWx5XG4gICAgICAvLyB0aGlzLmNhcm91c2VsQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgLy8gICB0aGlzLmluY3JlYXNlSW5kZXgoKTtcbiAgICAgIC8vIH0pO1xuXG4gICAgICB0aGlzLmluaXRFbGVtZW50U3RhdGVzKCk7XG4gICAgICB0aGlzLmluaXRFdmVudExpc3RlbmVycygpO1xuICAgICAgdGhpcy5zZXRJbmRleCgwKTtcblxuICAgICAgdGhpcy50aW1lclRpY2soKTtcbiAgICB9XG5cbiAgICB0aW1lclRpY2soKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB0aGlzLnRpbWVyICs9IDEwMDAgLyB0aGlzLnRpbWVyUmVmcmVzaFJhdGU7XG5cbiAgICAgIGlmICh0aGlzLnRpbWVyID4gdGhpcy50aW1lckR1cmF0aW9uKSB7XG4gICAgICAgIHRoaXMudGltZXIgPSAwO1xuICAgICAgICB0aGlzLmluY3JlYXNlSW5kZXgoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVBY3RpdmVDb250cm9sSGFuZGxlKCk7XG5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnRpbWVyVGljaygpO1xuICAgICAgfSwgMTAwMCAvIHRoaXMudGltZXJSZWZyZXNoUmF0ZSk7XG4gICAgfVxuXG4gICAgaW5pdEVsZW1lbnRTdGF0ZXMoKSB7XG4gICAgICBbXS5mb3JFYWNoLmNhbGwoXG4gICAgICAgIHRoaXMuY29udHJvbHNIYW5kbGVUaW1lcnMsXG4gICAgICAgIChoYW5kbGVUaW1lcjogSFRNTEVsZW1lbnQpID0+IChoYW5kbGVUaW1lci5zdHlsZS5mbGV4R3JvdyA9IFwiMFwiKVxuICAgICAgKTtcbiAgICAgIFtdLmZvckVhY2guY2FsbChcbiAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlcyxcbiAgICAgICAgKHNsaWRlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIC8vIEhpZGUgYWxsIGJ1dCB0aGUgZmlyc3QgYXBwIHNjcmVlblxuICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbGlkZS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGluaXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIFtdLmZvckVhY2guY2FsbChcbiAgICAgICAgdGhpcy5jb250cm9sc0hhbmRsZXMsXG4gICAgICAgIChoYW5kbGU6IEhUTUxFbGVtZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgaGFuZGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldEluZGV4KGluZGV4KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpbmNyZWFzZUluZGV4KCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmN1cnJlbnRJbmRleCA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXG4gICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPT09IHRoaXMuY29udHJvbHNIYW5kbGVUaW1lcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLnNldEluZGV4KDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRJbmRleCh0aGlzLmN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNldEluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgIHRoaXMudGltZXIgPSAwO1xuICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgIHRoaXMudXBkYXRlQ29udHJvbHNIYW5kbGVzKCk7XG4gICAgICB0aGlzLnVwZGF0ZUNhcm91c2VsQ29udGVudCgpO1xuICAgIH1cblxuICAgIHVwZGF0ZUFjdGl2ZUNvbnRyb2xIYW5kbGUoKSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudEluZGV4ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICh0aGlzLmNvbnRyb2xzSGFuZGxlVGltZXJzW1xuICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4XG4gICAgICAgIF0gYXMgSFRNTERpdkVsZW1lbnQpLnN0eWxlLmZsZXhHcm93ID0gYCR7XG4gICAgICAgICAgKDEgLyB0aGlzLnRpbWVyRHVyYXRpb24pICogdGhpcy50aW1lclxuICAgICAgICB9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVDb250cm9sc0hhbmRsZXMoKSB7XG4gICAgICBbXS5mb3JFYWNoLmNhbGwoXG4gICAgICAgIHRoaXMuY29udHJvbHNIYW5kbGVzLFxuICAgICAgICAoaGFuZGxlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIC8vIEhpZGUgYWxsIGJ1dCB0aGUgaGFuZGxlIHdpdGggdGhlIGN1cnJlbnQgaW5kZXhcbiAgICAgICAgICBpZiAoaW5kZXggPT09IHRoaXMuY3VycmVudEluZGV4KSB7XG4gICAgICAgICAgICBoYW5kbGUuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuICAgICAgICAgICAgaGFuZGxlLnN0eWxlLmhlaWdodCA9IFwiNjRweFwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGUuc3R5bGUub3BhY2l0eSA9IFwiMC40XCI7XG4gICAgICAgICAgICBoYW5kbGUuc3R5bGUuaGVpZ2h0ID0gXCI0OHB4XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHVwZGF0ZUNhcm91c2VsQ29udGVudCgpIHtcbiAgICAgIFtdLmZvckVhY2guY2FsbChcbiAgICAgICAgdGhpcy5jYXJvdXNlbFNsaWRlcyxcbiAgICAgICAgKHNsaWRlOiBIVE1MRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIC8vIEhpZGUgYWxsIGJ1dCB0aGUgc2xpZGUgd2l0aCB0aGUgY3VycmVudCBpbmRleFxuICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5jdXJyZW50SW5kZXgpIHtcbiAgICAgICAgICAgIHNsaWRlLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2xpZGUuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAod2luZG93IGFzIGFueSkuU2hvd2Nhc2VDYXJvdXNlbCA9IFNob3djYXNlQ2Fyb3VzZWw7XG5cbiAgYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNhcm91c2VscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICAnW2RhdGEtY29tcG9uZW50PVwic2hvd2Nhc2UtY2Fyb3VzZWxcIl0nXG4gICAgKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2Fyb3VzZWxzLmxlbmd0aDsgKytpKSB7XG4gICAgICBuZXcgU2hvd2Nhc2VDYXJvdXNlbChjYXJvdXNlbHNbaV0gYXMgSFRNTERpdkVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==